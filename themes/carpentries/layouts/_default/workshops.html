{{ define "add_to_head" }}
  {{ with resources.Get "/js/list.min.js" }}
    <script defer src="{{ .RelPermalink }}"></script>
  {{ end }}
  {{ with resources.Get "/js/filters.js" }}
    <script defer src="{{ .RelPermalink }}"></script>
  {{ end }}
{{ end }}
{{ define "main" }}
  {{ $workshops := slice }}
  {{ $filters := dict }}

  {{ with .Params.data_source }}
    {{ $workshops = partialCached "func/GetWorkshops" . . }}
    {{ $filters = partialCached "func/GetWorkshopsFilters" $workshops . }}
  {{ end }}
  <div class="container px-5 mx-auto">
    {{ partial "breadcrumbs" . }}
    <h1 class="text-[2rem] leading-[2.8125rem] font-semibold mb-6">{{ .Title }}</h1>
    {{ partial "subnav" . }}
    {{ $countries := slice }}
    <div id="filter" class="relative grid grid-cols-1 gap-8 md:grid-cols-12">
      <div class="pb-16 md:col-span-8 pro">
        <div class="filtered">
          {{ range $workshops }}
            {{ partial "workshop/card" . }}
          {{ end }}
        </div>
        <ul class="flex justify-center text-2xl pagination"></ul>
      </div>
      <div class="relative md:col-span-4">
        <div class="sticky top-10 sidebar">
          {{ partial "filters" $filters }}
          {{ .Render "sidebar" }}
        </div>
      </div>
    </div>
  </div>
{{ end }}
